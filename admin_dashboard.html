<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Y√∂netici Paneli | SEBA Akademi</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0f1a;
      --bg-secondary: #0f172a;
      --surface: #1e293b;
      --border: rgba(255, 255, 255, 0.08);
      --text: #f1f5f9;
      --text-muted: #94a3b8;
      --primary: #3b82f6;
      --secondary: #8b5cf6;
      --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
      --success: #22c55e;
      --warning: #f59e0b;
      --error: #ef4444;
      --radius: 16px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    .bg-glow {
      position: fixed;
      width: 600px;
      height: 600px;
      border-radius: 50%;
      filter: blur(150px);
      opacity: 0.1;
      pointer-events: none;
      z-index: 0;
    }

    .bg-glow-1 {
      top: -200px;
      right: -100px;
      background: var(--secondary);
    }

    .bg-glow-2 {
      bottom: -200px;
      left: -100px;
      background: var(--primary);
    }

    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(10, 15, 26, 0.9);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 16px 24px;
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: var(--text);
    }

    .logo-icon {
      width: auto;
      height: auto;
      background: none;
      border-radius: 8px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-text {
      font-size: 18px;
      font-weight: 700;
    }

    .logo-badge {
      padding: 4px 10px;
      background: rgba(139, 92, 246, 0.2);
      border: 1px solid rgba(139, 92, 246, 0.4);
      border-radius: 100px;
      font-size: 11px;
      font-weight: 600;
      color: #c4b5fd;
      margin-left: 8px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 16px;
      background: rgba(139, 92, 246, 0.15);
      border: 1px solid rgba(139, 92, 246, 0.3);
      border-radius: 12px;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      background: var(--gradient);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
    }

    .user-name {
      font-size: 14px;
      font-weight: 500;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      border-radius: 10px;
      font-weight: 500;
      font-size: 14px;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
      text-decoration: none;
      font-family: inherit;
    }

    .btn-primary {
      background: var(--gradient);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
    }

    .btn-danger {
      background: rgba(239, 68, 68, 0.15);
      color: #fca5a5;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .btn-danger:hover {
      background: rgba(239, 68, 68, 0.25);
    }

    .main {
      max-width: 1400px;
      margin: 0 auto;
      padding: 32px 24px;
      position: relative;
      z-index: 1;
    }

    /* Tabs */
    .admin-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 32px;
      padding: 6px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 14px;
      border: 1px solid var(--border);
    }

    .admin-tab {
      padding: 12px 20px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      border: none;
      background: transparent;
      color: var(--text-muted);
      transition: all 0.2s;
      font-family: inherit;
    }

    .admin-tab:hover {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
    }

    .admin-tab.active {
      background: var(--gradient);
      color: white;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.02) 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px;
    }

    .stat-icon {
      width: 48px;
      height: 48px;
      background: rgba(59, 130, 246, 0.15);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      margin-bottom: 16px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 14px;
      color: var(--text-muted);
    }

    /* Section */
    .section {
      display: none;
      margin-bottom: 40px;
    }

    .section.active {
      display: block;
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 20px;
      font-weight: 600;
    }

    /* Table */
    .table-container {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.02) 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
    }

    .table th,
    .table td {
      padding: 16px 20px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .table th {
      background: rgba(255, 255, 255, 0.03);
      font-weight: 600;
      font-size: 13px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .table tr:last-child td {
      border-bottom: none;
    }

    .table tr:hover td {
      background: rgba(255, 255, 255, 0.02);
    }

    .user-cell {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .user-cell-avatar {
      width: 36px;
      height: 36px;
      background: var(--gradient);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
    }

    .user-cell-info {
      display: flex;
      flex-direction: column;
    }

    .user-cell-name {
      font-weight: 500;
      font-size: 14px;
    }

    .user-cell-email {
      font-size: 12px;
      color: var(--text-muted);
    }

    .role-badge {
      display: inline-flex;
      padding: 4px 10px;
      border-radius: 100px;
      font-size: 12px;
      font-weight: 500;
    }

    .role-badge.student {
      background: rgba(34, 197, 94, 0.15);
      color: #86efac;
      border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .role-badge.admin {
      background: rgba(139, 92, 246, 0.15);
      color: #c4b5fd;
      border: 1px solid rgba(139, 92, 246, 0.3);
    }

    .action-btn {
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      transition: all 0.2s;
      margin-right: 6px;
    }

    .action-btn:hover {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
    }

    .action-btn.delete {
      color: #fca5a5;
      border-color: rgba(239, 68, 68, 0.3);
    }

    .action-btn.delete:hover {
      background: rgba(239, 68, 68, 0.15);
    }

    /* Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      width: 100%;
      max-width: 500px;
      background: linear-gradient(180deg, rgba(30, 41, 59, 1) 0%, rgba(15, 23, 42, 1) 100%);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 32px;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
    }

    .modal-close {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      font-size: 18px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 8px;
      color: var(--text-muted);
    }

    .form-input,
    .form-select {
      width: 100%;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 14px;
      font-family: inherit;
    }

    .form-input:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--primary);
    }

    .form-select option {
      background: var(--bg-secondary);
      color: var(--text);
    }

    .modal-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .modal-actions .btn {
      flex: 1;
      justify-content: center;
    }

    .btn-outline {
      background: transparent;
      color: var(--text-muted);
      border: 1px solid var(--border);
    }

    .btn-outline:hover {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
    }

    /* Content Cards */
    .content-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    .content-card {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.02) 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
    }

    .content-card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .content-card-icon {
      width: 44px;
      height: 44px;
      background: var(--gradient);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .content-card-title {
      font-size: 16px;
      font-weight: 600;
    }

    .content-card-subtitle {
      font-size: 13px;
      color: var(--text-muted);
    }

    .content-card-meta {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
      font-size: 13px;
      color: var(--text-muted);
    }

    .content-card-actions {
      display: flex;
      gap: 8px;
    }

    @media (max-width: 1024px) {
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .content-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {

      .stats-grid,
      .content-grid {
        grid-template-columns: 1fr;
      }

      .admin-tabs {
        flex-wrap: wrap;
      }

      .header-content {
        flex-wrap: wrap;
        gap: 16px;
      }

      .table-container {
        overflow-x: auto;
      }

      .table {
        min-width: 600px;
      }
    }

    /* Topic Item Styles */
    .topic-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--border);
      border-radius: 10px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .topic-item:hover {
      background: rgba(255, 255, 255, 0.06);
      border-color: var(--primary);
    }

    .topic-item.selected {
      background: rgba(59, 130, 246, 0.15);
      border-color: var(--primary);
    }

    .topic-order {
      width: 32px;
      height: 32px;
      background: var(--gradient);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      flex-shrink: 0;
    }

    .topic-info {
      flex: 1;
      min-width: 0;
    }

    .topic-title {
      font-weight: 500;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .topic-actions {
      display: flex;
      gap: 4px;
      flex-shrink: 0;
    }

    .reorder-btn {
      width: 28px;
      height: 28px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }

    .reorder-btn:hover:not(:disabled) {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text);
    }

    .reorder-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    /* Video Card Styles */
    .video-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
    }

    .video-card-header {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 12px;
    }

    .video-card-thumb {
      width: 120px;
      height: 68px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
    }

    .video-card-info {
      flex: 1;
    }

    .video-card-title {
      font-weight: 600;
      font-size: 15px;
      margin-bottom: 6px;
    }

    .video-card-meta {
      font-size: 12px;
      color: var(--text-muted);
    }

    .video-card-form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .video-card-form .form-group {
      margin-bottom: 0;
    }

    .video-card-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
      justify-content: flex-end;
    }

    /* Toast Notification */
    .toast-container {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .toast {
      padding: 16px 24px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 300px;
      animation: slideIn 0.3s ease;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .toast.success {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.95), rgba(22, 163, 74, 0.95));
      color: white;
    }

    .toast.error {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.95), rgba(220, 38, 38, 0.95));
      color: white;
    }

    .toast.warning {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.95), rgba(217, 119, 6, 0.95));
      color: white;
    }

    .toast.info {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(37, 99, 235, 0.95));
      color: white;
    }

    .toast-icon {
      font-size: 20px;
    }

    .toast-close {
      margin-left: auto;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      opacity: 0.7;
      font-size: 18px;
    }

    .toast-close:hover {
      opacity: 1;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }

      to {
        transform: translateX(100%);
        opacity: 0;
      }
    }

    /* Custom Confirm Modal */
    .confirm-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }

    .confirm-overlay.active {
      display: flex;
    }

    .confirm-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      animation: fadeInUp 0.3s ease;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .confirm-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .confirm-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .confirm-message {
      color: var(--text-muted);
      font-size: 14px;
      margin-bottom: 24px;
    }

    .confirm-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    .confirm-btn {
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
    }

    .confirm-btn.cancel {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text);
    }

    .confirm-btn.cancel:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    .confirm-btn.danger {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
    }

    .confirm-btn.danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3);
    }

    .confirm-btn.success {
      background: var(--gradient);
      color: white;
    }

    .confirm-btn.success:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
    }
  </style>
</head>

<body>
  <div class="toast-container" id="toastContainer"></div>

  <!-- Custom Confirm Modal -->
  <div class="confirm-overlay" id="confirmOverlay">
    <div class="confirm-box">
      <div class="confirm-icon" id="confirmIcon">‚ö†Ô∏è</div>
      <div class="confirm-title" id="confirmTitle">Onay Gerekiyor</div>
      <div class="confirm-message" id="confirmMessage">Bu i≈ülemi yapmak istediƒüinizden emin misiniz?</div>
      <div class="confirm-actions">
        <button class="confirm-btn cancel" onclick="hideConfirm()">ƒ∞ptal</button>
        <button class="confirm-btn danger" id="confirmBtn" onclick="confirmAction()">Onayla</button>
      </div>
    </div>
  </div>

  <div class="bg-glow bg-glow-1"></div>
  <div class="bg-glow bg-glow-2"></div>

  <header class="header">
    <div class="header-content">
      <a href="index.html" class="logo">
        <div class="logo-icon">üìö</div>
        <span class="logo-text">SEBA Akademi</span>
        <span class="logo-badge">ADMIN</span>
      </a>
      <div class="header-right">
        <div class="user-info">
          <div class="user-avatar" id="userAvatar">üë§</div>
          <span class="user-name" id="userName">Y√ºkleniyor...</span>
        </div>
        <button class="btn btn-danger" onclick="logout()">üö™ √áƒ±kƒ±≈ü</button>
      </div>
    </div>
  </header>

  <main class="main">
    <!-- Admin Tabs -->
    <div class="admin-tabs">
      <button class="admin-tab active" data-tab="dashboard" onclick="switchTab('dashboard')">üìä Genel Bakƒ±≈ü</button>
      <button class="admin-tab" data-tab="users" onclick="switchTab('users')">üë• Kullanƒ±cƒ±lar</button>
      <button class="admin-tab" data-tab="content" onclick="switchTab('content')">üìö ƒ∞√ßerik Y√∂netimi</button>
    </div>

    <!-- Dashboard Section -->
    <section class="section active" id="dashboardSection">
      <section class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">üë•</div>
          <div class="stat-value" id="totalUsers">0</div>
          <div class="stat-label">Toplam Kullanƒ±cƒ±</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üéì</div>
          <div class="stat-value" id="totalStudents">0</div>
          <div class="stat-label">√ñƒürenci</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üìπ</div>
          <div class="stat-value" id="totalVideos">0</div>
          <div class="stat-label">Video</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üìö</div>
          <div class="stat-value" id="totalTopics">0</div>
          <div class="stat-label">Konu</div>
        </div>
      </section>
    </section>

    <!-- Users Section -->
    <section class="section" id="usersSection">
      <div class="section-header">
        <h2 class="section-title">üë• Kayƒ±tlƒ± Kullanƒ±cƒ±lar</h2>
      </div>
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>Kullanƒ±cƒ±</th>
              <th>Rol</th>
              <th>ƒ∞≈ülemler</th>
            </tr>
          </thead>
          <tbody id="usersTableBody"></tbody>
        </table>
      </div>
    </section>

    <!-- Unified Content Management Section -->
    <section class="section" id="contentSection">
      <div class="section-header">
        <h2 class="section-title">üìö ƒ∞√ßerik Y√∂netimi</h2>
      </div>

      <!-- Category & Course Selectors -->
      <div style="display: flex; gap: 16px; margin-bottom: 24px;">
        <div style="flex: 1;">
          <label class="form-label">Kategori</label>
          <select class="form-select" id="contentCategory" onchange="updateContentCourses(); loadContentData();">
            <option value="tyt">TYT</option>
            <option value="ayt">AYT</option>
          </select>
        </div>
        <div style="flex: 1;">
          <label class="form-label">Ders</label>
          <select class="form-select" id="contentCourse" onchange="loadContentData();">
            <option value="mat">Matematik</option>
          </select>
        </div>
      </div>

      <!-- Two Column Layout: Topics | Videos -->
      <div style="display: grid; grid-template-columns: 1fr 1.5fr; gap: 24px;">

        <!-- Left: Topic List -->
        <div class="table-container" style="padding: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h3 style="font-size: 16px; font-weight: 600;">üìã Konular</h3>
            <button class="btn btn-primary" style="padding: 8px 12px; font-size: 13px;" onclick="openTopicModal()">+
              Konu Ekle</button>
          </div>
          <div id="topicsList" style="max-height: 500px; overflow-y: auto;">
            <!-- Topics will be rendered here -->
          </div>
        </div>

        <!-- Right: Video Details for Selected Topic -->
        <div class="table-container" style="padding: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h3 style="font-size: 16px; font-weight: 600;">üé¨ <span id="selectedTopicName">Konu Se√ßin</span> - Videolar
            </h3>
            <button class="btn btn-primary" style="padding: 8px 12px; font-size: 13px;"
              onclick="openVideoModalForTopic()" id="addVideoBtn" disabled>+ Video Ekle</button>
          </div>
          <div id="videosList">
            <p style="color: var(--text-muted); text-align: center; padding: 40px;">
              ‚Üê Sol taraftan bir konu se√ßin
            </p>
          </div>
        </div>

      </div>
    </section>
  </main>

  <!-- Video Modal -->
  <div class="modal-overlay" id="videoModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">üé¨ Video Ekle</h3>
        <button class="modal-close" onclick="closeVideoModal()">√ó</button>
      </div>
      <form id="videoForm">
        <div class="form-group">
          <label class="form-label">Kategori</label>
          <select class="form-select" id="videoCategory" required onchange="updateVideoCourses()">
            <option value="tyt">TYT</option>
            <option value="ayt">AYT</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Ders</label>
          <select class="form-select" id="videoCourse" required onchange="updateVideoTopics()">
            <option value="mat">Matematik</option>
            <option value="geo">Geometri</option>
            <option value="trk">T√ºrk√ße</option>
            <option value="fiz">Fizik</option>
            <option value="kim">Kimya</option>
            <option value="bio">Biyoloji</option>
            <option value="tar">Tarih</option>
            <option value="cog">Coƒürafya</option>
            <option value="fel">Felsefe</option>
            <option value="din">Din K√ºlt√ºr√º</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Konu</label>
          <select class="form-select" id="videoTopic" required>
            <option value="1">Konu 1</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Video Ba≈ülƒ±ƒüƒ±</label>
          <input type="text" class="form-input" id="videoTitle" placeholder="√ñrn: √úsl√º Sayƒ±lar Konu Anlatƒ±mƒ±" required>
        </div>
        <div class="form-group">
          <label class="form-label">YouTube Video ID</label>
          <input type="text" class="form-input" id="videoYoutubeId" placeholder="√ñrn: dQw4w9WgXcQ" required>
        </div>
        <div class="form-group">
          <label class="form-label">S√ºre</label>
          <input type="text" class="form-input" id="videoDuration" placeholder="√ñrn: 15:30" required>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-outline" onclick="closeVideoModal()">ƒ∞ptal</button>
          <button type="button" class="btn btn-primary" onclick="submitVideoForm()">Kaydet</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Topic Modal -->
  <div class="modal-overlay" id="topicModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">üìö Konu Ekle</h3>
        <button class="modal-close" onclick="closeTopicModal()">√ó</button>
      </div>
      <form id="topicForm">
        <div class="form-group">
          <label class="form-label">Kategori</label>
          <select class="form-select" id="topicCategory" required onchange="updateTopicCourses()">
            <option value="tyt">TYT</option>
            <option value="ayt">AYT</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Ders</label>
          <select class="form-select" id="topicCourse" required>
            <option value="mat">Matematik</option>
            <option value="geo">Geometri</option>
            <option value="trk">T√ºrk√ße</option>
            <option value="fiz">Fizik</option>
            <option value="kim">Kimya</option>
            <option value="bio">Biyoloji</option>
            <option value="tar">Tarih</option>
            <option value="cog">Coƒürafya</option>
            <option value="fel">Felsefe</option>
            <option value="din">Din K√ºlt√ºr√º</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Konu Adƒ±</label>
          <input type="text" class="form-input" id="topicTitle" placeholder="√ñrn: √úsl√º Sayƒ±lar" required>
        </div>
        <div class="form-group">
          <label class="form-label">Konu Sƒ±rasƒ±</label>
          <input type="number" class="form-input" id="topicOrder" placeholder="√ñrn: 1" value="1" min="1" required>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-outline" onclick="closeTopicModal()">ƒ∞ptal</button>
          <button type="button" class="btn btn-primary" onclick="submitTopicForm()">Kaydet</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Check authentication
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser || !currentUser.loggedIn) {
      window.location.href = 'login.html';
    } else if (currentUser.role !== 'admin') {
      window.location.href = 'student_dashboard.html';
    }

    // Global state variables - MUST be declared at top to avoid ReferenceError
    let editingVideoId = null;
    let editingTopicId = null;
    let selectedTopicId = null;

    // Update UI
    if (currentUser) {
      document.getElementById('userName').textContent = currentUser.name;
      document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
    }

    // Toast notification function
    function showToast(message, type = 'success') {
      const container = document.getElementById('toastContainer');
      const icons = {
        success: '‚úÖ',
        error: '‚ùå',
        warning: '‚ö†Ô∏è',
        info: '‚ÑπÔ∏è'
      };

      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <span class="toast-icon">${icons[type]}</span>
        <span>${message}</span>
        <button class="toast-close" onclick="this.parentElement.remove()">√ó</button>
      `;

      container.appendChild(toast);

      // Auto remove after 3 seconds
      setTimeout(() => {
        toast.style.animation = 'slideOut 0.3s ease forwards';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Custom Confirm Modal
    let pendingConfirmCallback = null;

    function showConfirm(options) {
      const { title, message, icon, type, onConfirm } = options;

      document.getElementById('confirmIcon').textContent = icon || '‚ö†Ô∏è';
      document.getElementById('confirmTitle').textContent = title || 'Onay Gerekiyor';
      document.getElementById('confirmMessage').textContent = message || 'Bu i≈ülemi yapmak istediƒüinizden emin misiniz?';

      const confirmBtn = document.getElementById('confirmBtn');
      confirmBtn.className = `confirm-btn ${type || 'danger'}`;
      confirmBtn.textContent = type === 'success' ? 'Kaydet' : 'Sil';

      pendingConfirmCallback = onConfirm;
      document.getElementById('confirmOverlay').classList.add('active');
    }

    function hideConfirm() {
      document.getElementById('confirmOverlay').classList.remove('active');
      pendingConfirmCallback = null;
    }

    function confirmAction() {
      if (pendingConfirmCallback) {
        pendingConfirmCallback();
      }
      hideConfirm();
    }

    // Initialize data stores with complete 2025 YKS Curriculum
    // FORCE RESET: Remove old data and use new complete data
    const initializeFullCurriculum = () => {
      let topicId = 1;
      const allTopics = [];

      // TYT MATEMATƒ∞K
      const tytMat = ['Temel Kavramlar', 'Sayƒ± Basamaklarƒ±', 'B√∂lme ve B√∂l√ºnebilme', 'EBOB - EKOK', 'Rasyonel Sayƒ±lar', 'Basit E≈üitsizlikler', 'Mutlak Deƒüer', '√úsl√º Sayƒ±lar', 'K√∂kl√º Sayƒ±lar', '√áarpanlara Ayƒ±rma', 'Oran - Orantƒ±', 'Denklem √á√∂zme', 'Problemler', 'K√ºmeler', 'Mantƒ±k', 'Fonksiyonlar', 'Polinomlar', 'ƒ∞kinci Dereceden Denklemler', 'Perm√ºtasyon ve Kombinasyon', 'Olasƒ±lƒ±k', 'Veri ve ƒ∞statistik'];
      tytMat.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'mat', title, order: i + 1 }));

      // TYT GEOMETRƒ∞
      const tytGeo = ['Temel Kavramlar ve A√ßƒ±lar', '√ú√ßgenler', 'Dik √ú√ßgen ve Trigonometri', 'D√∂rtgenler', '√áokgenler', '√áember ve Daire', 'Katƒ± Cisimler', 'Analitik Geometri Temelleri'];
      tytGeo.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'geo', title, order: i + 1 }));

      // TYT T√úRK√áE
      const tytTrk = ['S√∂zc√ºkte Anlam', 'C√ºmlede Anlam', 'Paragrafta Anlam', 'Ses Bilgisi', 'Yazƒ±m Kurallarƒ±', 'Noktalama ƒ∞≈üaretleri', 'S√∂zc√ºk T√ºrleri', 'C√ºmlenin √ñƒüeleri', 'C√ºmle T√ºrleri', 'Anlatƒ±m Bozukluklarƒ±', 'Paragraf Tamamlama'];
      tytTrk.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'trk', title, order: i + 1 }));

      // TYT Fƒ∞Zƒ∞K
      const tytFiz = ['Fizik Bilimine Giri≈ü', 'Madde ve √ñzellikleri', 'Sƒ±vƒ± Basƒ±ncƒ±', 'Gaz Basƒ±ncƒ±', 'Kaldƒ±rma Kuvveti', 'Isƒ± ve Sƒ±caklƒ±k', 'Hareket', 'Kuvvet', 'Enerji', 'Elektrik', 'Optik'];
      tytFiz.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'fiz', title, order: i + 1 }));

      // TYT Kƒ∞MYA
      const tytKim = ['Kimya Bilimi', 'Atom ve Yapƒ±sƒ±', 'Periyodik Sistem', 'Kimyasal T√ºrler Arasƒ± Etkile≈üimler', 'Maddenin Halleri', 'Karƒ±≈üƒ±mlar', 'Asitler ve Bazlar', 'Kimya Her Yerde', 'Kimyasal Tepkimeler', 'Mol Hesaplamalarƒ±'];
      tytKim.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'kim', title, order: i + 1 }));

      // TYT Bƒ∞YOLOJƒ∞
      const tytBio = ['Canlƒ±nƒ±n Temel Bile≈üenleri', 'H√ºcre', 'Canlƒ±larƒ±n Sƒ±nƒ±flandƒ±rƒ±lmasƒ±', 'Mitoz ve E≈üeysiz √úreme', 'Mayoz ve E≈üeyli √úreme', 'Kalƒ±tƒ±m', 'Ekosistem Ekolojisi', 'G√ºncel √áevre Sorunlarƒ±', 'Canlƒ±lar ve √áevre'];
      tytBio.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'bio', title, order: i + 1 }));

      // TYT TARƒ∞H
      const tytTar = ['Tarih ve Zaman', 'ƒ∞nsanlƒ±ƒüƒ±n ƒ∞lk D√∂nemleri', 'Orta √áaƒüda D√ºnya', 'ƒ∞lk ve Orta √áaƒülarda T√ºrk D√ºnyasƒ±', 'ƒ∞slam Medeniyetinin Doƒüu≈üu', 'ƒ∞lk T√ºrk ƒ∞slam Devletleri', 'Osmanlƒ± Tarihi'];
      tytTar.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'tar', title, order: i + 1 }));

      // TYT COƒûRAFYA
      const tytCog = ['Doƒüa ve ƒ∞nsan', 'D√ºnya\'nƒ±n ≈ûekli ve Hareketleri', 'Harita Bilgisi', 'ƒ∞klim Bilgisi', 'T√ºrkiye\'nin ƒ∞klimi', 'N√ºfus ve Yerle≈üme', 'T√ºrkiye Ekonomisi'];
      tytCog.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'cog', title, order: i + 1 }));

      // TYT FELSEFE
      const tytFel = ['Felsefeye Giri≈ü', 'Bilgi Felsefesi', 'Varlƒ±k Felsefesi', 'Ahlak Felsefesi', 'Sanat Felsefesi', 'Din Felsefesi'];
      tytFel.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'fel', title, order: i + 1 }));

      // TYT Dƒ∞N K√úLT√úR√ú
      const tytDin = ['ƒ∞nsanƒ±n Varolu≈üu', 'ƒ∞slam ve ƒ∞badet', 'Kur\'an\'a G√∂re Evren ve ƒ∞nsan', 'Ahlaki Davranƒ±≈ülar', 'ƒ∞slam D√º≈ü√ºncesinde Tasavvuf'];
      tytDin.forEach((title, i) => allTopics.push({ id: topicId++, category: 'tyt', course: 'din', title, order: i + 1 }));

      // AYT MATEMATƒ∞K
      const aytMat = ['Fonksiyonlar (ƒ∞leri)', 'Polinomlar', 'ƒ∞kinci Dereceden Denklemler', 'Parabol', 'Karma≈üƒ±k Sayƒ±lar', 'ƒ∞kinci Dereceden E≈üitsizlikler', 'Trigonometri', 'Toplam - √áarpƒ±m Sembolleri', 'Diziler', 'Logaritma', 'Limit ve S√ºreklilik', 'T√ºrev', 'T√ºrev Uygulamalarƒ±', 'ƒ∞ntegral', 'ƒ∞ntegral Uygulamalarƒ±'];
      aytMat.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-mat', title, order: i + 1 }));

      // AYT GEOMETRƒ∞
      const aytGeo = ['√ú√ßgenlerde E≈ülik ve Benzerlik', '√ú√ßgende Alan', '√áemberin Analitik ƒ∞ncelemesi', 'D√∂rtgenlerin Alanlarƒ±', 'Katƒ± Cisimlerin Hacimleri', 'Analitik Geometri'];
      aytGeo.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-geo', title, order: i + 1 }));

      // AYT Fƒ∞Zƒ∞K
      const aytFiz = ['Vekt√∂rler', 'Baƒüƒ±l Hareket', 'Newton Hareket Yasalarƒ± (ƒ∞leri)', 'ƒ∞≈ü, Enerji ve G√º√ß', 'ƒ∞mpuls ve Momentum', 'Tork ve Denge', 'Basit Harmonik Hareket', 'Dalga Mekaniƒüi', 'Elektrik Alan ve Potansiyel', 'Manyetik Alan ve Kuvvet', 'Elektromanyetik ƒ∞nd√ºksiyon', 'Alternatif Akƒ±m', 'Atom Fiziƒüine Giri≈ü', 'Modern Fizik'];
      aytFiz.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-fiz', title, order: i + 1 }));

      // AYT Kƒ∞MYA
      const aytKim = ['Kimyasal Tepkimelerde Enerji', 'Tepkime Hƒ±zlarƒ±', 'Kimyasal Denge', '√á√∂z√ºn√ºrl√ºk Dengesi', 'Asit-Baz Dengesi ve pH', 'Elektrokimya', 'Organik Kimyaya Giri≈ü', 'Hidrokarbonlar', 'Fonksiyonel Gruplar', 'Organik Tepkimeler', 'Polimerler', 'Enerji Kaynaklarƒ±'];
      aytKim.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-kim', title, order: i + 1 }));

      // AYT Bƒ∞YOLOJƒ∞
      const aytBio = ['N√ºkleik Asitler ve Protein Sentezi', 'Enerji D√∂n√º≈ü√ºmleri', 'Sinir Sistemi', 'Endokrin Sistem', 'Duyu Organlarƒ±', 'Destek ve Hareket', 'Sindirim Sistemi', 'Dola≈üƒ±m ve Baƒüƒ±≈üƒ±klƒ±k', 'Solunum Sistemi', 'Bo≈üaltƒ±m Sistemi', '√úreme Sistemi', 'Pop√ºlasyon Ekolojisi', 'Genetik M√ºhendisliƒüi'];
      aytBio.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-bio', title, order: i + 1 }));

      // AYT EDEBƒ∞YAT
      const aytEdeb = ['Edebiyata Giri≈ü', '≈ûiir Bilgisi', 'Edebi Akƒ±mlar', 'ƒ∞slamiyet √ñncesi T√ºrk Edebiyatƒ±', 'Divan Edebiyatƒ±', 'Halk Edebiyatƒ±', 'Tanzimat Edebiyatƒ±', 'Servetif√ºnun Edebiyatƒ±', 'Fecr-i Ati', 'Milli Edebiyat', 'Cumhuriyet D√∂nemi'];
      aytEdeb.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'edeb', title, order: i + 1 }));

      // AYT TARƒ∞H-1
      const aytTar1 = ['Osmanlƒ± K√ºlt√ºr ve Medeniyeti', 'Osmanlƒ± Duraklama D√∂nemi', 'Osmanlƒ± Gerileme D√∂nemi', 'Osmanlƒ± Daƒüƒ±lma D√∂nemi', 'Kurtulu≈ü Sava≈üƒ± Hazƒ±rlƒ±k', 'Kurtulu≈ü Sava≈üƒ± Muharebeleri', 'Atat√ºrk ƒ∞lkeleri ve ƒ∞nkƒ±laplar'];
      aytTar1.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-tar1', title, order: i + 1 }));

      // AYT TARƒ∞H-2
      const aytTar2 = ['19. Y√ºzyƒ±lda Avrupa', 'I. D√ºnya Sava≈üƒ±', 'ƒ∞ki Sava≈ü Arasƒ± D√∂nem', 'II. D√ºnya Sava≈üƒ±', 'Soƒüuk Sava≈ü D√∂nemi', 'Yumu≈üama D√∂nemi', 'SSCB\'nin Daƒüƒ±lmasƒ±', 'K√ºreselle≈üen D√ºnya'];
      aytTar2.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-tar2', title, order: i + 1 }));

      // AYT COƒûRAFYA
      const aytCog = ['Doƒüal Sistemler', 'Be≈üeri Sistemler', 'T√ºrkiye\'nin B√∂lgeleri', 'Ekonomik Coƒürafya', 'K√ºresel B√∂lgeler ve √úlkeler', '√áevre ve Toplum', 'T√ºrkiye Ekonomik Coƒürafyasƒ±'];
      aytCog.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-cog', title, order: i + 1 }));

      // AYT FELSEFE GRUBU
      const aytFel = ['Psikoloji', 'Sosyoloji', 'Mantƒ±k', 'Felsefe Tarihi'];
      aytFel.forEach((title, i) => allTopics.push({ id: topicId++, category: 'ayt', course: 'ayt-fel', title, order: i + 1 }));

      localStorage.setItem('adminTopics', JSON.stringify(allTopics));

      // Sample videos for TYT Matematik
      const sampleVideos = [
        { id: 1, category: 'tyt', course: 'mat', topicId: 1, title: 'Temel Kavramlar Konu Anlatƒ±mƒ±', youtubeId: 'dQw4w9WgXcQ', duration: '25:30' },
        { id: 2, category: 'tyt', course: 'mat', topicId: 1, title: 'Temel Kavramlar Soru √á√∂z√ºm√º', youtubeId: 'dQw4w9WgXcQ', duration: '18:45' },
        { id: 3, category: 'tyt', course: 'mat', topicId: 2, title: 'Sayƒ± Basamaklarƒ± Konu Anlatƒ±mƒ±', youtubeId: 'dQw4w9WgXcQ', duration: '22:00' },
        { id: 4, category: 'tyt', course: 'mat', topicId: 8, title: '√úsl√º Sayƒ±lar Konu Anlatƒ±mƒ±', youtubeId: 'dQw4w9WgXcQ', duration: '30:15' }
      ];
      localStorage.setItem('adminVideos', JSON.stringify(sampleVideos));

      console.log('[Admin] Initialized', allTopics.length, 'topics and', sampleVideos.length, 'videos');
    };

    // Only initialize if no data exists - DON'T overwrite user changes!
    if (!localStorage.getItem('adminTopics') || JSON.parse(localStorage.getItem('adminTopics')).length === 0) {
      initializeFullCurriculum();
    } else {
      console.log('[Admin] Using existing data from localStorage');
    }

    const courseNames = {
      // TYT
      'mat': 'Matematik', 'geo': 'Geometri', 'trk': 'T√ºrk√ße', 'fiz': 'Fizik',
      'kim': 'Kimya', 'bio': 'Biyoloji', 'tar': 'Tarih', 'cog': 'Coƒürafya',
      'fel': 'Felsefe', 'din': 'Din K√ºlt√ºr√º',
      // AYT
      'ayt-mat': 'AYT Matematik', 'ayt-geo': 'AYT Geometri', 'ayt-fiz': 'AYT Fizik',
      'ayt-kim': 'AYT Kimya', 'ayt-bio': 'AYT Biyoloji', 'edeb': 'Edebiyat',
      'ayt-tar1': 'Tarih-1', 'ayt-tar2': 'Tarih-2', 'ayt-cog': 'AYT Coƒürafya', 'ayt-fel': 'Felsefe Grubu'
    };

    const tytCourses = ['mat', 'geo', 'trk', 'fiz', 'kim', 'bio', 'tar', 'cog', 'fel', 'din'];
    const aytCourses = ['ayt-mat', 'ayt-geo', 'ayt-fiz', 'ayt-kim', 'ayt-bio', 'edeb', 'ayt-tar1', 'ayt-tar2', 'ayt-cog', 'ayt-fel'];

    // Update course dropdowns based on category selection
    function updateVideoCourses() {
      const category = document.getElementById('videoCategory').value;
      const courseSelect = document.getElementById('videoCourse');
      const courses = category === 'tyt' ? tytCourses : aytCourses;

      courseSelect.innerHTML = courses.map(c =>
        `<option value="${c}">${courseNames[c]}</option>`
      ).join('');
      updateVideoTopics();
    }

    function updateTopicCourses() {
      const category = document.getElementById('topicCategory').value;
      const courseSelect = document.getElementById('topicCourse');
      const courses = category === 'tyt' ? tytCourses : aytCourses;

      courseSelect.innerHTML = courses.map(c =>
        `<option value="${c}">${courseNames[c]}</option>`
      ).join('');
    }

    // Update topics dropdown based on course selection
    function updateVideoTopics() {
      const course = document.getElementById('videoCourse').value;
      const topicSelect = document.getElementById('videoTopic');
      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];

      const courseTopics = topics.filter(t => t.course === course);

      if (courseTopics.length === 0) {
        topicSelect.innerHTML = '<option value="1">Varsayƒ±lan Konu</option>';
      } else {
        topicSelect.innerHTML = courseTopics
          .sort((a, b) => (a.order || 1) - (b.order || 1))
          .map(t => `<option value="${t.order || t.id}">${t.title}</option>`)
          .join('');
      }
    }

    // =====================================================
    // UNIFIED CONTENT MANAGEMENT
    // =====================================================

    // Update content course dropdown based on category
    function updateContentCourses() {
      const category = document.getElementById('contentCategory').value;
      const courseSelect = document.getElementById('contentCourse');
      const courses = category === 'tyt' ? tytCourses : aytCourses;

      courseSelect.innerHTML = courses.map(c =>
        `<option value="${c}">${courseNames[c]}</option>`
      ).join('');

      selectedTopicId = null;
    }

    // Load and render content data (topics and videos)
    function loadContentData() {
      const category = document.getElementById('contentCategory').value;
      const course = document.getElementById('contentCourse').value;
      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];

      // Filter topics by category and course
      const filteredTopics = topics
        .filter(t => t.course === course && (t.category === category || !t.category))
        .sort((a, b) => (a.order || 999) - (b.order || 999));

      // Render topics list
      const topicsList = document.getElementById('topicsList');

      if (filteredTopics.length === 0) {
        topicsList.innerHTML = `
          <p style="color: var(--text-muted); text-align: center; padding: 40px;">
            Bu ders i√ßin hen√ºz konu eklenmemi≈ü.<br>
            <button class="btn btn-primary" style="margin-top: 16px;" onclick="openTopicModal()">+ ƒ∞lk Konuyu Ekle</button>
          </p>`;
      } else {
        topicsList.innerHTML = filteredTopics.map((topic, index) => `
          <div class="topic-item ${selectedTopicId === topic.id ? 'selected' : ''}" onclick="selectTopic(${topic.id})">
            <div class="topic-order">${topic.order || index + 1}</div>
            <div class="topic-info">
              <div class="topic-title">${topic.title}</div>
            </div>
            <div class="topic-actions" onclick="event.stopPropagation()">
              <button class="reorder-btn" onclick="moveTopic(${topic.id}, 'up')" ${index === 0 ? 'disabled' : ''} title="Yukarƒ± Ta≈üƒ±">‚Üë</button>
              <button class="reorder-btn" onclick="moveTopic(${topic.id}, 'down')" ${index === filteredTopics.length - 1 ? 'disabled' : ''} title="A≈üaƒüƒ± Ta≈üƒ±">‚Üì</button>
              <button class="reorder-btn" onclick="deleteTopic(${topic.id})" title="Sil" style="color: #f87171;">üóëÔ∏è</button>
            </div>
          </div>
        `).join('');
      }

      // If a topic is selected, load its videos
      if (selectedTopicId) {
        renderTopicVideos(selectedTopicId);
      } else {
        document.getElementById('videosList').innerHTML = `
          <p style="color: var(--text-muted); text-align: center; padding: 40px;">
            ‚Üê Sol taraftan bir konu se√ßin
          </p>`;
        document.getElementById('selectedTopicName').textContent = 'Konu Se√ßin';
        document.getElementById('addVideoBtn').disabled = true;
      }
    }

    // Select a topic and show its videos
    function selectTopic(topicId) {
      selectedTopicId = topicId;
      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];
      const topic = topics.find(t => t.id === topicId);

      if (topic) {
        document.getElementById('selectedTopicName').textContent = topic.title;
        document.getElementById('addVideoBtn').disabled = false;
      }

      loadContentData();
    }

    // Move topic up or down
    function moveTopic(topicId, direction) {
      const category = document.getElementById('contentCategory').value;
      const course = document.getElementById('contentCourse').value;
      let topics = JSON.parse(localStorage.getItem('adminTopics')) || [];

      // Get filtered topics for this course
      const courseTopics = topics
        .filter(t => t.course === course && (t.category === category || !t.category))
        .sort((a, b) => (a.order || 999) - (b.order || 999));

      const currentIndex = courseTopics.findIndex(t => t.id === topicId);
      if (currentIndex === -1) return;

      const swapIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;
      if (swapIndex < 0 || swapIndex >= courseTopics.length) return;

      // Swap orders
      const currentOrder = courseTopics[currentIndex].order || currentIndex + 1;
      const swapOrder = courseTopics[swapIndex].order || swapIndex + 1;

      // Update in main topics array
      topics = topics.map(t => {
        if (t.id === topicId) return { ...t, order: swapOrder };
        if (t.id === courseTopics[swapIndex].id) return { ...t, order: currentOrder };
        return t;
      });

      localStorage.setItem('adminTopics', JSON.stringify(topics));
      loadContentData();
    }

    // Render videos for selected topic
    function renderTopicVideos(topicId) {
      const videos = JSON.parse(localStorage.getItem('adminVideos')) || [];
      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];
      const topic = topics.find(t => t.id === topicId);

      if (!topic) return;

      // Get topic order to match videos
      const topicOrder = topic.order || 1;
      const course = document.getElementById('contentCourse').value;

      const topicVideos = videos.filter(v => v.course === course && v.topicId === topicOrder);

      const videosList = document.getElementById('videosList');

      if (topicVideos.length === 0) {
        videosList.innerHTML = `
          <p style="color: var(--text-muted); text-align: center; padding: 40px;">
            Bu konuda hen√ºz video yok.<br>
            <button class="btn btn-primary" style="margin-top: 16px;" onclick="openVideoModalForTopic()">+ Video Ekle</button>
          </p>`;
      } else {
        videosList.innerHTML = topicVideos.map(video => `
          <div class="video-card" id="video-${video.id}">
            <div class="video-card-header">
              <div class="video-card-thumb">
                <img src="https://img.youtube.com/vi/${video.youtubeId}/mqdefault.jpg" 
                     style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;"
                     onerror="this.parentElement.innerHTML='üé¨'">
              </div>
              <div class="video-card-info">
                <div class="video-card-title">${video.title}</div>
                <div class="video-card-meta">YouTube ID: ${video.youtubeId} ‚Ä¢ S√ºre: ${video.duration || '-'}</div>
              </div>
            </div>
            <div class="video-card-form">
              <div class="form-group">
                <label class="form-label">Video Ba≈ülƒ±ƒüƒ± *</label>
                <input type="text" class="form-input" id="vTitle-${video.id}" value="${video.title}" required>
              </div>
              <div class="form-group">
                <label class="form-label">YouTube Video ID *</label>
                <input type="text" class="form-input" id="vYoutubeId-${video.id}" value="${video.youtubeId}" required>
              </div>
              <div class="form-group">
                <label class="form-label">S√ºre *</label>
                <input type="text" class="form-input" id="vDuration-${video.id}" value="${video.duration || ''}" placeholder="15:30" required>
              </div>
            </div>
            <div class="video-card-actions">
              <button class="btn btn-danger" style="padding: 8px 16px;" onclick="deleteVideoFromTopic(${video.id})">üóëÔ∏è Sil</button>
              <button class="btn btn-primary" style="padding: 8px 16px;" onclick="saveVideoChanges(${video.id})">üíæ Kaydet</button>
            </div>
          </div>
        `).join('');
      }
    }

    // Save video changes with validation
    function saveVideoChanges(videoId) {
      const title = document.getElementById(`vTitle-${videoId}`).value.trim();
      const youtubeId = document.getElementById(`vYoutubeId-${videoId}`).value.trim();
      const duration = document.getElementById(`vDuration-${videoId}`).value.trim();

      // Validation
      if (!title) {
        showToast('Video ba≈ülƒ±ƒüƒ± bo≈ü bƒ±rakƒ±lamaz!', 'error');
        return;
      }
      if (!youtubeId) {
        showToast('YouTube Video ID bo≈ü bƒ±rakƒ±lamaz!', 'error');
        return;
      }
      if (!duration) {
        showToast('S√ºre bo≈ü bƒ±rakƒ±lamaz!', 'error');
        return;
      }

      // Duration format validation (MM:SS or HH:MM:SS)
      const durationRegex = /^(\d{1,2}:)?\d{1,2}:\d{2}$/;
      if (!durationRegex.test(duration)) {
        showToast('S√ºre formatƒ± ge√ßersiz! √ñrn: 15:30 veya 1:25:30', 'error');
        return;
      }

      let videos = JSON.parse(localStorage.getItem('adminVideos')) || [];
      videos = videos.map(v => {
        if (v.id === videoId) {
          return { ...v, title, youtubeId, duration };
        }
        return v;
      });

      localStorage.setItem('adminVideos', JSON.stringify(videos));
      showToast('Video ba≈üarƒ±yla g√ºncellendi!', 'success');
      renderTopicVideos(selectedTopicId);
    }

    // Delete video from topic
    function deleteVideoFromTopic(videoId) {
      showConfirm({
        icon: 'üóëÔ∏è',
        title: 'Video Sil',
        message: 'Bu videoyu silmek istediƒüinizden emin misiniz?',
        type: 'danger',
        onConfirm: () => {
          let videos = JSON.parse(localStorage.getItem('adminVideos')) || [];
          videos = videos.filter(v => v.id !== videoId);
          localStorage.setItem('adminVideos', JSON.stringify(videos));
          renderTopicVideos(selectedTopicId);
          loadData(); // Update stats
          showToast('Video silindi!', 'success');
        }
      });
    }

    // Open video modal for selected topic
    function openVideoModalForTopic() {
      if (!selectedTopicId) {
        showToast('L√ºtfen √∂nce bir konu se√ßin!', 'warning');
        return;
      }

      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];
      const topic = topics.find(t => t.id === selectedTopicId);

      if (!topic) return;

      // Pre-fill video modal
      editingVideoId = null;
      document.getElementById('videoForm').reset();
      document.querySelector('#videoModal .modal-title').textContent = 'üé¨ Video Ekle - ' + topic.title;

      document.getElementById('videoCategory').value = topic.category || 'tyt';
      updateVideoCourses();
      document.getElementById('videoCourse').value = topic.course;
      updateVideoTopics();
      document.getElementById('videoTopic').value = topic.order || 1;

      document.getElementById('videoModal').classList.add('active');
    }

    // Initialize content section on page load
    document.addEventListener('DOMContentLoaded', function () {
      updateContentCourses();
      loadContentData();

      // Restore last active tab from localStorage
      const lastTab = localStorage.getItem('adminActiveTab') || 'dashboard';
      switchTab(lastTab);
    });

    // Tab switching with persistence
    function switchTab(tabName) {
      console.log('[Debug] Switching to tab:', tabName);

      // Save to localStorage for persistence
      localStorage.setItem('adminActiveTab', tabName);

      document.querySelectorAll('.admin-tab').forEach(tab => {
        tab.classList.toggle('active', tab.dataset.tab === tabName);
      });
      document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(tabName + 'Section').classList.add('active');

      // If switching to content tab, refresh content
      if (tabName === 'content') {
        loadContentData();
      }
    }

    // Load data
    function loadData() {
      const users = JSON.parse(localStorage.getItem('users')) || [];
      const videos = JSON.parse(localStorage.getItem('adminVideos')) || [];
      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];

      // Update stats
      document.getElementById('totalUsers').textContent = users.length;
      document.getElementById('totalStudents').textContent = users.filter(u => u.role === 'student').length;
      document.getElementById('totalVideos').textContent = videos.length;
      document.getElementById('totalTopics').textContent = topics.length;

      // Render users
      const tableBody = document.getElementById('usersTableBody');
      tableBody.innerHTML = users.map(user => `
        <tr>
          <td>
            <div class="user-cell">
              <div class="user-cell-avatar">${user.name.charAt(0).toUpperCase()}</div>
              <div class="user-cell-info">
                <span class="user-cell-name">${user.name}</span>
                <span class="user-cell-email">${user.email}</span>
              </div>
            </div>
          </td>
          <td>
            <span class="role-badge ${user.role}">${user.role === 'admin' ? 'üë®‚Äçüíº Y√∂netici' : 'üéì √ñƒürenci'}</span>
          </td>
          <td>
            ${user.email !== currentUser.email ?
          `<button class="action-btn delete" onclick="deleteUser('${user.email}')">Sil</button>` :
          '<span style="color: var(--text-muted); font-size: 12px;">Aktif hesap</span>'
        }
          </td>
        </tr>
      `).join('');

      // Populate filter dropdowns
      const allCourses = [...Object.keys(courseNames)];
      const videoFilterHtml = '<option value="">T√ºm Dersler</option>' +
        allCourses.map(c => `<option value="${c}">${courseNames[c]}</option>`).join('');
      document.getElementById('videoFilterCourse').innerHTML = videoFilterHtml;
      document.getElementById('topicFilterCourse').innerHTML = videoFilterHtml;

      // Get filter values
      const videoFilter = document.getElementById('videoFilterCourse').value;
      const topicFilter = document.getElementById('topicFilterCourse').value;

      // Filter and render videos
      const filteredVideos = videoFilter ? videos.filter(v => v.course === videoFilter) : videos;
      const videosTableBody = document.getElementById('videosTableBody');
      videosTableBody.innerHTML = filteredVideos.length ? filteredVideos.map(video => `
        <tr>
          <td>
            <div class="user-cell">
              <div class="user-cell-avatar" style="background: rgba(59, 130, 246, 0.3);">üé¨</div>
              <div class="user-cell-info">
                <span class="user-cell-name">${video.title}</span>
              </div>
            </div>
          </td>
          <td><span class="role-badge student">${courseNames[video.course] || video.course}</span></td>
          <td>Konu ${video.topicId || 1}</td>
          <td><code style="background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 4px;">${video.youtubeId}</code></td>
          <td>${video.duration || '-'}</td>
          <td>
            <button class="action-btn" onclick="editVideo(${video.id})">‚úèÔ∏è D√ºzenle</button>
            <button class="action-btn delete" onclick="deleteVideo(${video.id})">üóëÔ∏è Sil</button>
          </td>
        </tr>
      `).join('') : '<tr><td colspan="6" style="text-align: center; color: var(--text-muted);">Hen√ºz video eklenmemi≈ü.</td></tr>';

      // Filter and render topics
      const filteredTopics = topicFilter ? topics.filter(t => t.course === topicFilter) : topics;
      const sortedTopics = filteredTopics.sort((a, b) => (a.order || 1) - (b.order || 1));
      const topicsTableBody = document.getElementById('topicsTableBody');
      topicsTableBody.innerHTML = sortedTopics.length ? sortedTopics.map(topic => `
        <tr>
          <td><span style="background: var(--gradient); padding: 4px 12px; border-radius: 20px; font-weight: 600;">${topic.order || '-'}</span></td>
          <td>
            <div class="user-cell">
              <div class="user-cell-avatar" style="background: rgba(139, 92, 246, 0.3);">üìö</div>
              <div class="user-cell-info">
                <span class="user-cell-name">${topic.title}</span>
              </div>
            </div>
          </td>
          <td><span class="role-badge admin">${courseNames[topic.course] || topic.course}</span></td>
          <td>${topic.category?.toUpperCase() || 'TYT'}</td>
          <td>
            <button class="action-btn" onclick="editTopic(${topic.id})">‚úèÔ∏è D√ºzenle</button>
            <button class="action-btn delete" onclick="deleteTopic(${topic.id})">üóëÔ∏è Sil</button>
          </td>
        </tr>
      `).join('') : '<tr><td colspan="5" style="text-align: center; color: var(--text-muted);">Hen√ºz konu eklenmemi≈ü.</td></tr>';
    }

    loadData();

    // User management
    function deleteUser(email) {
      showConfirm({
        icon: 'üë§',
        title: 'Kullanƒ±cƒ± Sil',
        message: 'Bu kullanƒ±cƒ±yƒ± silmek istediƒüinizden emin misiniz?',
        type: 'danger',
        onConfirm: () => {
          const users = JSON.parse(localStorage.getItem('users')) || [];
          localStorage.setItem('users', JSON.stringify(users.filter(u => u.email !== email)));
          loadData();
          showToast('Kullanƒ±cƒ± silindi!', 'success');
        }
      });
    }

    // Video management

    function openVideoModal() {
      editingVideoId = null;
      document.getElementById('videoForm').reset();
      document.querySelector('#videoModal .modal-title').textContent = 'üé¨ Video Ekle';
      document.getElementById('videoModal').classList.add('active');
    }

    function closeVideoModal() {
      document.getElementById('videoModal').classList.remove('active');
      document.getElementById('videoForm').reset();
      editingVideoId = null;
    }

    function editVideo(id) {
      const videos = JSON.parse(localStorage.getItem('adminVideos')) || [];
      const video = videos.find(v => v.id === id);
      if (!video) return;

      editingVideoId = id;
      document.querySelector('#videoModal .modal-title').textContent = '‚úèÔ∏è Video D√ºzenle';

      // Pre-fill form
      document.getElementById('videoCategory').value = video.category || 'tyt';
      updateVideoCourses();
      document.getElementById('videoCourse').value = video.course;
      updateVideoTopics();
      document.getElementById('videoTopic').value = video.topicId || 1;
      document.getElementById('videoTitle').value = video.title;
      document.getElementById('videoYoutubeId').value = video.youtubeId;
      document.getElementById('videoDuration').value = video.duration || '';

      document.getElementById('videoModal').classList.add('active');
    }

    function submitVideoForm() {
      console.log('[Debug] submitVideoForm called');
      const videos = JSON.parse(localStorage.getItem('adminVideos')) || [];

      // Validation
      const title = document.getElementById('videoTitle').value.trim();
      const youtubeId = document.getElementById('videoYoutubeId').value.trim();
      const duration = document.getElementById('videoDuration').value.trim();

      if (!title) {
        showToast('Video ba≈ülƒ±ƒüƒ± bo≈ü bƒ±rakƒ±lamaz!', 'error');
        return;
      }
      if (!youtubeId) {
        showToast('YouTube Video ID bo≈ü bƒ±rakƒ±lamaz!', 'error');
        return;
      }
      if (!duration) {
        showToast('S√ºre bo≈ü bƒ±rakƒ±lamaz!', 'error');
        return;
      }

      // Duration format validation (MM:SS or HH:MM:SS)
      const durationRegex = /^(\d{1,2}:)?\d{1,2}:\d{2}$/;
      if (!durationRegex.test(duration)) {
        showToast('S√ºre formatƒ± ge√ßersiz! √ñrn: 15:30 veya 1:25:30', 'error');
        return;
      }

      const videoData = {
        id: editingVideoId || Date.now(),
        category: document.getElementById('videoCategory').value,
        course: document.getElementById('videoCourse').value,
        topicId: parseInt(document.getElementById('videoTopic').value),
        title: title,
        youtubeId: youtubeId,
        duration: duration
      };

      console.log('[Debug] Video data:', videoData);

      if (editingVideoId) {
        // Update existing
        const index = videos.findIndex(v => v.id === editingVideoId);
        if (index !== -1) {
          videos[index] = videoData;
        }
        showToast('Video ba≈üarƒ±yla g√ºncellendi!', 'success');
      } else {
        // Add new
        videos.push(videoData);
        showToast('Video ba≈üarƒ±yla eklendi!', 'success');
      }

      localStorage.setItem('adminVideos', JSON.stringify(videos));
      console.log('[Debug] Videos saved to localStorage:', videos.length);

      closeVideoModal();

      // Switch to content tab if not already there
      switchTab('content');

      loadData();
      loadContentData(); // Refresh topics
      if (selectedTopicId) {
        renderTopicVideos(selectedTopicId); // Refresh video list
      }

      console.log('[Debug] UI refreshed');
    }

    function deleteVideo(id) {
      showConfirm({
        icon: 'üé¨',
        title: 'Video Sil',
        message: 'Bu videoyu silmek istediƒüinizden emin misiniz?',
        type: 'danger',
        onConfirm: () => {
          const videos = JSON.parse(localStorage.getItem('adminVideos')) || [];
          localStorage.setItem('adminVideos', JSON.stringify(videos.filter(v => v.id !== id)));
          loadData();
          showToast('Video silindi!', 'success');
        }
      });
    }

    // Topic management

    function openTopicModal() {
      editingTopicId = null;
      document.getElementById('topicForm').reset();
      document.querySelector('#topicModal .modal-title').textContent = 'üìö Konu Ekle';

      // Pre-fill with current selection from content view
      const category = document.getElementById('contentCategory')?.value || 'tyt';
      const course = document.getElementById('contentCourse')?.value || 'mat';

      document.getElementById('topicCategory').value = category;
      updateTopicCourses();
      document.getElementById('topicCourse').value = course;

      // Calculate next order number
      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];
      const courseTopics = topics.filter(t => t.course === course);
      const maxOrder = courseTopics.reduce((max, t) => Math.max(max, t.order || 0), 0);
      document.getElementById('topicOrder').value = maxOrder + 1;

      document.getElementById('topicModal').classList.add('active');
    }

    function closeTopicModal() {
      document.getElementById('topicModal').classList.remove('active');
      document.getElementById('topicForm').reset();
      editingTopicId = null;
    }

    function editTopic(id) {
      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];
      const topic = topics.find(t => t.id === id);
      if (!topic) return;

      editingTopicId = id;
      document.querySelector('#topicModal .modal-title').textContent = '‚úèÔ∏è Konu D√ºzenle';

      // Pre-fill form
      document.getElementById('topicCategory').value = topic.category || 'tyt';
      updateTopicCourses();
      document.getElementById('topicCourse').value = topic.course;
      document.getElementById('topicTitle').value = topic.title;
      document.getElementById('topicOrder').value = topic.order || 1;

      document.getElementById('topicModal').classList.add('active');
    }

    function submitTopicForm() {
      console.log('[Debug] submitTopicForm called');

      // Validation
      const title = document.getElementById('topicTitle').value.trim();
      if (!title) {
        showToast('Konu ba≈ülƒ±ƒüƒ± bo≈ü bƒ±rakƒ±lamaz!', 'error');
        return;
      }

      const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];

      const topicData = {
        id: editingTopicId || Date.now(),
        category: document.getElementById('topicCategory').value,
        course: document.getElementById('topicCourse').value,
        title: title,
        order: parseInt(document.getElementById('topicOrder').value)
      };

      console.log('[Debug] Topic data:', topicData);

      if (editingTopicId) {
        // Update existing
        const index = topics.findIndex(t => t.id === editingTopicId);
        if (index !== -1) {
          topics[index] = topicData;
        }
        showToast('Konu ba≈üarƒ±yla g√ºncellendi!', 'success');
      } else {
        // Add new
        topics.push(topicData);
        showToast('Konu ba≈üarƒ±yla eklendi!', 'success');
      }

      localStorage.setItem('adminTopics', JSON.stringify(topics));
      console.log('[Debug] Topics saved to localStorage:', topics.length);

      closeTopicModal();

      // Ensure content section is visible and dropdowns match the saved topic
      document.getElementById('contentCategory').value = topicData.category;
      updateContentCourses();
      document.getElementById('contentCourse').value = topicData.course;

      // Switch to content tab if not already there
      switchTab('content');

      loadData();
      loadContentData(); // Refresh content view

      console.log('[Debug] UI refreshed');
    }

    function deleteTopic(id) {
      showConfirm({
        icon: 'üìö',
        title: 'Konu Sil',
        message: 'Bu konuyu silmek istediƒüinizden emin misiniz?',
        type: 'danger',
        onConfirm: () => {
          const topics = JSON.parse(localStorage.getItem('adminTopics')) || [];
          localStorage.setItem('adminTopics', JSON.stringify(topics.filter(t => t.id !== id)));
          loadData();
          loadContentData(); // Refresh content view
          showToast('Konu silindi!', 'success');
        }
      });
    }

    function logout() {
      localStorage.removeItem('currentUser');
      window.location.href = 'login.html';
    }
  </script>
</body>

</html>